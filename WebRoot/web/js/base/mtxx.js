var xiuxiu=window.xiuxiu||{};xiuxiu.lightEditor=xiuxiu.lightEditor||{url:"http://open.web.meitu.com/sources/light/PhotoEditor.swf?version=201303271517",base:"http://open.web.meitu.com/sources/light/",width:"528",height:"385",type:1};xiuxiu.lightPuzzle=xiuxiu.lightPuzzle||{url:"http://open.web.meitu.com/sources/puzzle/CollagePlugin.swf?version=201303271509",base:"http://open.web.meitu.com/sources/puzzle/",width:"528",height:"470",type:2};xiuxiu.richEditor=xiuxiu.richEditor||{url:"http://xiuxiu.web.meitu.com/Main.swf?v=2.6.9",base:"http://xiuxiu.web.meitu.com/",width:"100%",height:"100%",type:3};xiuxiu.daitoutie=xiuxiu.daitoutie||{url:"http://open.web.meitu.com/sources/daitoutie/FacePhoto.swf?version=20130217",base:"http://open.web.meitu.com/sources/daitoutie/",width:"568",height:"478",type:4};xiuxiu.uploadType=1;xiuxiu.defaultUploadDataFieldName="Filedata";xiuxiu.uploadDataFieldName="Filedata";xiuxiu.swfobjectInit=false;xiuxiu.defaultID="xiuxiuEditor";xiuxiu.waitingEmbedSWF=[];xiuxiu.swfs=[];xiuxiu.flashvars={source:"plugin",initFun:"xiuxiu.init",changeFlashHeightFun:"xiuxiu.setHeight",mouseWheelFun:"xiuxiu.mouseWheel",jsUploadFun:"xiuxiu.upload",beforeUploadFun:"xiuxiu.beforeUpload",uploadResponseFun:"xiuxiu.uploadResponse",closePhotoEditorFun:"xiuxiu.close",debugFun:"xiuxiu.debug"};xiuxiu.params={menu:"false",scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always",bgcolor:"#FFFFFF",wmode:"window"};function JsLoader(){this.load=function(b){var d=document.getElementsByTagName("script");for(i=0;i<d.length;i++){if(d[i].src&&d[i].src.indexOf(b)!=-1){this.onsuccess();return}}s=document.createElement("script");s.type="text/javascript";s.src=b;var c=document.getElementsByTagName("head")[0];c.appendChild(s);var a=this;s.onload=s.onreadystatechange=function(){if(this.readyState&&this.readyState=="loading"){return}a.onsuccess()};s.onerror=function(){c.removeChild(s);a.onfailure()}}}var jsLoader=new JsLoader();jsLoader.onsuccess=function(){xiuxiu.swfobjectInit=true;var a=xiuxiu.waitingEmbedSWF.length;var c;for(var b=0;b<a;b++){c=xiuxiu.waitingEmbedSWF[b];xiuxiu.embedSWF(c.container,c.editorType,c.width,c.height,c.id)}xiuxiu.waitingEmbedSWF=[]};jsLoader.onfailure=function(){};jsLoader.load("http://open.web.meitu.com/sources/swfobject.js");xiuxiu.embedSWF=function(b,c,f,l,e){var a;xiuxiu.container=b;if(document.getElementById(xiuxiu.container)){document.getElementById(xiuxiu.container).innerHTML='<p><a href="http://www.adobe.com/go/getflashplayer"><img alt="Get Adobe Flash player" src="http://wwwimages.adobe.com/www.adobe.com/images/shared/download_buttons/get_flash_player.gif"></a></p>'}xiuxiu.editorType=Number(c)||xiuxiu.lightEditor.type;xiuxiu.attributes={};xiuxiu.attributes.name=xiuxiu.attributes.id=(e||xiuxiu.defaultID);xiuxiu.flashvars.objectID=xiuxiu.attributes.id;if(xiuxiu.editorType==xiuxiu.lightPuzzle.type){a=xiuxiu.lightPuzzle.url;xiuxiu.params.base=xiuxiu.lightPuzzle.base;f=f||xiuxiu.lightPuzzle.width;l=l||xiuxiu.lightPuzzle.height}else{if(xiuxiu.editorType==xiuxiu.richEditor.type){a=xiuxiu.richEditor.url;xiuxiu.params.base=xiuxiu.richEditor.base;f=f||xiuxiu.richEditor.width;l=l||xiuxiu.richEditor.height}else{if(xiuxiu.editorType==xiuxiu.daitoutie.type){a=xiuxiu.daitoutie.url;xiuxiu.params.base=xiuxiu.daitoutie.base;f=f||xiuxiu.daitoutie.width;l=l||xiuxiu.daitoutie.height}else{a=xiuxiu.lightEditor.url;xiuxiu.params.base=xiuxiu.lightEditor.base;f=f||xiuxiu.lightEditor.width;l=l||xiuxiu.lightEditor.height;xiuxiu.editorType=xiuxiu.lightEditor.type}}}var g={};for(var j in xiuxiu.flashvars){g[j]=xiuxiu.flashvars[j]}var k={};for(j in xiuxiu.params){k[j]=xiuxiu.params[j]}if(xiuxiu.swfobjectInit){if(xiuxiu.single){var d=xiuxiu.swfs.length;for(var h=0;h<d;h++){swfobject.removeSWF(xiuxiu.swfs[h].id)}xiuxiu.swfs=[]}swfobject.embedSWF(a,xiuxiu.container,f,l,"10.2.0","http://open.web.meitu.com/sources/expressInstall.swf",g,k,xiuxiu.attributes);xiuxiu.swfs.push({id:xiuxiu.attributes.id,type:xiuxiu.editorType})}else{xiuxiu.waitingEmbedSWF.push({container:xiuxiu.container,editorType:xiuxiu.editorType,width:f,height:l,id:e})}};xiuxiu.init=function(a){xiuxiu.setUploadURL(xiuxiu.uploadURL,a);xiuxiu.setUploadArgs(xiuxiu.uploadArgs,a);xiuxiu.setUploadType(xiuxiu.uploadType,a);xiuxiu.setUploadDataFieldName(xiuxiu.uploadDataFieldName,a);if(xiuxiu.onInit&&typeof(xiuxiu.onInit)=="function"){xiuxiu.onInit(a)}};xiuxiu.beforeUpload=function(a,b){if(xiuxiu.onBeforeUpload&&typeof(xiuxiu.onBeforeUpload)=="function"){return xiuxiu.onBeforeUpload(a,b)}else{return true}};xiuxiu.uploadResponse=function(a,b){if(xiuxiu.onUploadResponse&&typeof(xiuxiu.onUploadResponse)=="function"){xiuxiu.onUploadResponse(a,b)}};xiuxiu.close=function(a){if(xiuxiu.onClose&&typeof(xiuxiu.onClose)=="function"){xiuxiu.onClose(a)}};xiuxiu.debug=function(a,b){if(xiuxiu.onDebug&&typeof(xiuxiu.onDebug)=="function"){xiuxiu.onDebug(a,b)}};xiuxiu.loadPhoto=function(b,c,e,d){var d={uploadType:xiuxiu.uploadType};d.base64=Boolean(c);if(b){d.images=d.imageURL=b}if(xiuxiu.uploadURL){d.uploadURL=xiuxiu.uploadURL}if(xiuxiu.uploadArgs){d.uploadArgs=xiuxiu.uploadArgs}if(xiuxiu.uploadDataFieldName){d.uploadDataFieldName=xiuxiu.uploadDataFieldName}if(xiuxiu.getEditor(e)){var a=xiuxiu.getEditorTypeByID(e);if(a==xiuxiu.richEditor.type){if(b){d.loadImageChannel="main";xiuxiu.getEditor(e).loadImages(b,d)}}else{xiuxiu.getEditor(e).loadPhoto(d)}}};xiuxiu.upload=function(a,b,c){xiuxiu.uploadURL=a||xiuxiu.uploadURL;xiuxiu.uploadArgs=b||xiuxiu.uploadArgs;if(xiuxiu.uploadType==1&&xiuxiu.uploadURL&&xiuxiu.getEditor(c)){xiuxiu.getEditor(c).upload(xiuxiu.uploadURL,xiuxiu.uploadArgs)}};xiuxiu.reset=function(){xiuxiu.uploadURL="";xiuxiu.uploadArgs=null;xiuxiu.uploadType=1;xiuxiu.uploadDataFieldName=xiuxiu.defaultUploadDataFieldName};xiuxiu.getEditor=function(a){a=a||(xiuxiu.swfs.length>0?xiuxiu.swfs[0].id:xiuxiu.defaultID);return xiuxiu.getFlash(a)};xiuxiu.setUploadURL=function(a,b){xiuxiu.uploadURL=a;if(xiuxiu.uploadURL&&xiuxiu.getEditor(b)&&xiuxiu.getEditor(b).setParam){xiuxiu.getEditor(b).setParam("uploadURL",a)}};xiuxiu.setUploadArgs=function(a,b){xiuxiu.uploadArgs=a;if(xiuxiu.uploadArgs&&xiuxiu.getEditor(b)&&xiuxiu.getEditor(b).setParam){xiuxiu.getEditor(b).setParam("uploadArgs",a)}};xiuxiu.setUploadType=function(a,b){xiuxiu.uploadType=a;if(xiuxiu.uploadType&&xiuxiu.getEditor(b)&&xiuxiu.getEditor(b).setParam){xiuxiu.getEditor(b).setParam("uploadType",a)}};xiuxiu.setUploadDataFieldName=function(a,b){xiuxiu.uploadDataFieldName=a;if(xiuxiu.uploadDataFieldName&&xiuxiu.getEditor(b)&&xiuxiu.getEditor(b).setParam){xiuxiu.getEditor(b).setParam("uploadDataFieldName",a)}};xiuxiu.setLaunchVars=xiuxiu.setFlashvars=function(a,b){xiuxiu.flashvars[a]=b};xiuxiu.setCloseByHTML=function(a){xiuxiu.flashvars.closeByHTML=Number(a)};xiuxiu.setHeight=function(a,b){if(xiuxiu.getEditor(b)){xiuxiu.getEditor(b).height=a}};xiuxiu.mouseWheel=function(b,a){if(xiuxiu.getEditor(a)&&xiuxiu.getEditor(a).mouseWheel){xiuxiu.getEditor(a).mouseWheel(b)}};xiuxiu.getFlash=function(b){var a=document.getElementById(b);if(!a){if(navigator.appName.indexOf("Microsoft")!=-1){a=window[b]}else{a=document[b]}}return a};xiuxiu.getEditorTypeByID=function(e){var a=xiuxiu.swfs.length;e=e||(a>0?xiuxiu.swfs[0].id:xiuxiu.defaultID);var d;var c=xiuxiu.lightEditor.type;for(var b=0;b<a;b++){d=xiuxiu.swfs[b];if(e==d.id){return d.type}}return c};
var idleUploadBox = {
	show:function(data){
		var left = getLeft(data.target)+2+"px";
		var top = getTop(data.target)+4+"px";
		$("#idleUploadBox").css({left:left,top:top}).fadeIn(200);
	},
	hide:function(){
		$("#idleUploadBox").hide();
	}
}